<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~      Copyright (C) 2020  Kestros, Inc.
  ~
  ~     This program is free software: you can redistribute it and/or modify
  ~     it under the terms of the GNU General Public License as published by
  ~     the Free Software Foundation, either version 3 of the License, or
  ~     (at your option) any later version.
  ~
  ~     This program is distributed in the hope that it will be useful,
  ~     but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~     GNU General Public License for more details.
  ~
  ~     You should have received a copy of the GNU General Public License
  ~     along with this program.  If not, see <https://www.gnu.org/licenses/>.
  ~
  -->

<jcr:root xmlns:sling="http://sling.apache.org/jcr/sling/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0"
  jcr:primaryType="kes:GuideArticle">
  <jcr:content jcr:primaryType="nt:unstructured"
    jcr:title="Getting Started"
    group="Getting Started"
    sling:resourceType="kestros/components/guides/pages/guide-article">
    <content jcr:primaryType="nt:unstructured"
      sling:resourceType="kestros/commons/components/content-area">
      <heading jcr:primaryType="nt:unstructured"
        sling:resourceType="kestros/commons/components/content/heading"
        text="Creating a New Kestros Instance"
        level="h3"/>
      <text jcr:primaryType="nt:unstructured"
        sling:resourceType="kestros/commons/components/content/richtext"
        text="&lt;p&gt;In order to run Kestros, you will need to install &lt;a href=&quot;https://docs.docker.com/install&quot;&gt;Docker&lt;/a&gt;.&lt;/p&gt;"/>
      <create-container jcr:primaryType="nt:unstructured"
        sling:resourceType="kestros/commons/components/content-area">
        <docker-command jcr:primaryType="nt:unstructured"
          sling:resourceType="kestros/commons/components/content-area">
          <heading jcr:primaryType="nt:unstructured"
            sling:resourceType="kestros/commons/components/content/heading"
            text="Docker Command"
            level="h4"/>
          <text jcr:primaryType="nt:unstructured"
            sling:resourceType="kestros/commons/components/content/text"
            text="The fastest way to get Kestros running is to run:"/>
          <code jcr:primaryType="nt:unstructured"
            sling:resourceType="kestros/commons/components/content/code"
            text="docker run -p 8080:8080 --name kestros-platform-beta -v /tmp/sling/logs:/opt/sling/sling/logs kestros/kestros-platform-beta:latest"/>
        </docker-command>
        <docker-compose jcr:primaryType="nt:unstructured"
          sling:resourceType="kestros/commons/components/content-area">
          <heading jcr:primaryType="nt:unstructured"
            sling:resourceType="kestros/commons/components/content/heading"
            text="Docker Compose"
            level="h4"/>
          <text jcr:primaryType="nt:unstructured"
            sling:resourceType="kestros/commons/components/content/richtext"
            text="&lt;p&gt;To run Kestros with &lt;a href=&quot;https://docs.docker.com/compose/&quot;&gt;Docker Compose&lt;/a&gt; add the following to your Docker Compose file:&lt;/p&gt;"/>
          <code jcr:primaryType="nt:unstructured"
            sling:resourceType="kestros/commons/components/content/code"
            text="kestros:\\n\\timage: kestros/kestros-platform-beta:latest\\n\\tcontainer_name: kestros\\n\\tports:\\n\\t\\t- 8080:8080:\\n\\t\\t- 30303:30303:\\n\\tvolumes:\\n\\t\\t- /srv/docker/kestros:/opt/sling/sling/logs\\n\\tenvironment:\\n\\t\\t- JAVA_OPTS=-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=30303"/>
        </docker-compose>
      </create-container>
      <generate-project jcr:primaryType="nt:unstructured"
        sling:resourceType="kestros/commons/components/content-area">
        <heading jcr:primaryType="nt:unstructured"
          sling:resourceType="kestros/commons/components/content/heading"
          text="Generate a New Project from the Kestros Archetype"
          level="h4"/>
        <intro-text jcr:primaryType="nt:unstructured"
          sling:resourceType="kestros/commons/components/content/text"
          text="Use the Kestros Project Archetype to generate a new project:"/>
        <generate-code jcr:primaryType="nt:unstructured"
          sling:resourceType="kestros/commons/components/content/code"
          text="mvn archetype:generate \\ \\n-DarchetypeGroupId=io.kestros.cms.archetypes \\ \\n-DarchetypeArtifactId=kestros-project-archetype \\ \\n-DarchetypeVersion=0.0.1-SNAPSHOT"/>
        <install-text jcr:primaryType="nt:unstructured"
          sling:resourceType="kestros/commons/components/content/text"
          text="To install your generated site, run the following from your generated project:"/>
        <install-code jcr:primaryType="nt:unstructured"
          sling:resourceType="kestros/commons/components/content/code"
          text="mvn clean install -P,installPackage,installBundle"/>
      </generate-project>
    </content>

  </jcr:content>


</jcr:root>